window.__require=function t(e,r,n){function o(c,u){if(!r[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var f="function"==typeof __require&&__require;if(!u&&f)return f(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+c+"'")}}var s=r[c]={exports:{}};e[c][0].call(s.exports,function(t){return o(e[c][1][t]||t)},s,s.exports,t,e,r,n)}return r[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)o(n[c]);return o}({Astar:[function(t,e,r){"use strict";cc._RF.push(e,"28c8fAHModB24x1ukatqjrV","Astar");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,o){"object"==(void 0===r?"undefined":n(r))&&void 0!==e?e.exports=o():"function"==typeof define&&define.amd?define(o):"function"==typeof define&&(define.cmd||define.hjs)?define(function(t,e,r){r.exports=o()}):t.Astar=o()}(void 0,function(){var t=function(t){return t.split(",").map(Number)};return function(){function e(t){var e=this;e.grid=t,e.openList={},e.closeList={},e.current}return e.prototype.search=function(t,e,r){var n,o,i=this,c={rightAngle:!1,optimalResult:!0};for(var u in r=i.searchOption=r||{},c)void 0===r[u]&&(r[u]=c[u]);return i.start=t,i.end=e,i.grid.get(t).value=0,i.grid.set(t,"type","start"),i.grid.get(e).value=0,i.grid.set(e,"type","end"),i.openList[t]=null,i.grid.set(t,"type","open"),(o=function(t){if(i.grid.set(t,"type","highlight"),i.grid.get(t)===i.grid.get(i.end))n=i.getBackPath(t);else{for(var e=i.getAround(t),r=0,c=e.length;r<c;r++){var u=e[r],a=i.grid.get(u);if(null!==i.openList[u])i.openList[u]=null,a.parent=t,a.g=i.g(u,t),a.h=i.h(u,i.end),a.f=i.f(u),i.grid.set(u,"type","open");else{var f=a.g,s=i.g(u,t);s<f&&(a.parent=t,a.g=s,a.f=i.f(u),i.grid.set(u,"type","update"))}}delete i.openList[t],i.closeList[t]=null,i.grid.set(t,"type","close");var l=i.getOpenListMin();l&&o(l.key)}})(t),n},e.prototype.getBackPath=function(t){var e,r=this,n=[t];return(e=function(t){var o=r.grid.get(t).parent;o&&(n.unshift(o),e(o))})(t),n},e.prototype.getOpenListMin=function(){var e,r=this;for(var n in r.openList){var o=t(n),i=r.grid.get(o);(void 0===e||i.f<e.f)&&(e=r.grid.get(o))}return e},e.prototype.getOffsetGrid=function(t,e){return[t[0]+e[0],t[1]+e[1]]},e.prototype.getAround=function(t){var e=this,r=e.searchOption,n=[],o=e.grid,i={lt:[-1,-1],t:[0,-1],rt:[1,-1],r:[1,0],rb:[1,1],b:[0,1],lb:[-1,1],l:[-1,0]},c=function(t,r){var n=o.get(e.getOffsetGrid(t,r));return void 0!==n&&n.value>0};for(var u in r.rightAngle?(delete i.lt,delete i.rt,delete i.rb,delete i.lb):(c(t,i.l)&&(delete i.lt,delete i.lb),c(t,i.r)&&(delete i.rt,delete i.rb),c(t,i.t)&&(delete i.lt,delete i.rt),c(t,i.b)&&(delete i.lb,delete i.rb)),i){var a=i[u],f=[t[0]+a[0],t[1]+a[1]],s=null===e.closeList[f];f[0]>-1&&f[0]<o.col&&f[1]>-1&&f[1]<o.row&&!s&&o.get(f).value<1&&n.push(f)}return n},e.prototype.f=function(t){var e=this.grid.get(t);return e.g+e.h},e.prototype.g=function(t,e){return this.searchOption.optimalResult?(e[0]===t[0]||e[1]===t[1]?10:14)+this.grid.get(e).g:0},e.prototype.h=function(t,e){return 10*(Math.abs(t[0]-e[0])+Math.abs(t[1]-e[1]))},e}()}),cc._RF.pop()},{}],Grid:[function(t,e,r){"use strict";cc._RF.push(e,"8a697CnbYxERo3fgrgClHCx","Grid");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,o){"object"==(void 0===r?"undefined":n(r))&&void 0!==e?e.exports=o():"function"==typeof define&&define.amd?define(o):"function"==typeof define&&(define.cmd||define.hjs)?define(function(t,e,r){r.exports=o()}):t.Grid=o()}(void 0,function(){var t=function(t,e){return~~(Math.random()*(e-t+1))+t},e=function(t,e){var r=this;r.x=t,r.y=e,r.g=0,r.h=0,r.f=0,r.value=0,r.key=[t,e]};return function(){function r(t){var e=this;e.col=t.col,e.row=t.row,e.grid=e.createGrid(t.col,t.row,t.render)}return r.prototype.obstacle=function(e,r){for(var n,o=this,i=~~(o.col*o.row*e/100),c=[],u={},a=0;a<i;a++)(n=function(){c[0]=t(0,o.col-1),c[1]=t(0,o.row-1);var e=o.get(c);0===e.value?(e.value=r,u[[c[0],c[1]]]=null):n()})();return u},r.prototype.get=function(t){var e=this.grid[t[1]];return e?e[t[0]]:void 0},r.prototype.set=function(t,e,r){var n=this.get(t);n[e]=r,"function"==typeof n.render&&n.render({key:e,val:r})},r.prototype.createGrid=function(t,r,n){for(var o=[],i=0;i<r;i++)!function(r){var i=function(){for(var o=[],i=0;i<t;i++){var c=new e(i,r);"function"==typeof n&&(c.render=n),o[i]=c}return o}();o.push(i)}(i);return o},r.prototype.getData=function(){for(var t=this.grid,e=[],r=0,n=t.length;r<n;r++)!function(r,n){var o=t[r];e.push(function(){for(var t=[],e=0,r=o.length;e<r;e++)t.push(o[e].value);return t}())}(r);return e},r}()}),cc._RF.pop()},{}],index:[function(t,e,r){"use strict";cc._RF.push(e,"c9ab7M/7IJK2Y8klTIf0dmq","index");var n=t("./Grid"),o=t("./Astar");e.exports={Grid:n,Astar:o},cc._RF.pop()},{"./Astar":"Astar","./Grid":"Grid"}],main:[function(t,e,r){"use strict";cc._RF.push(e,"6d4ccQR9klNR44wxdItH6Gn","main");var n=t("index"),o=n.Grid,i=n.Astar;cc.Class({extends:cc.Component,properties:{player:cc.Node,wall:cc.Prefab,map:cc.Node,pathPf:cc.Prefab,btn:cc.Node,tip:cc.Node},onLoad:function(){this.btn.on("click",function(){cc.director.loadScene("firstScene")})},start:function(){this.createMap()},createMap:function(){this.tip.active=!1;var t=[];this.map.removeAllChildren();for(var e=0;e<100;e++){var r=[];r[0]=this.getRandomIntInclusive(0,22),r[1]=this.getRandomIntInclusive(0,14),t.push(r);var n=cc.instantiate(this.wall);n.parent=this.map,n.x=40*r[0]+20,n.y=40*r[1]+20}this.search(t)},search:function(t){var e=this,r=new o({col:24,row:16,render:function(){}});t.forEach(function(t){r.set(t,"value",1)});var n=new i(r).search([0,0],[23,15],{rightAngle:!0,optimalResult:!0});if(console.log(n),!n)return console.log("\u4e0d\u5b58\u5728\u8def\u5f84"),void(this.tip.active=!0);this.count=0,this.schedule(function(){var t=n[e.count];if(t){e.player.x=40*t[0]+20,e.player.y=40*t[1]+20,console.log(e.player.x,e.player.y);var r=cc.instantiate(e.pathPf);r.parent=e.map,r.x=40*t[0]+20,r.y=40*t[1]+20,e.count++}},.05,n.length,1)},getRandomIntInclusive:function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}}),cc._RF.pop()},{index:"index"}]},{},["Astar","Grid","index","main"]);